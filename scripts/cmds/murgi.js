const delay = (ms) => new Promise(res => setTimeout(res, ms));
const activeFun = new Map();

module.exports = {
  config: {
    name: "murgi",
    version: "1.0.0",
    role: 0,
    author: "AI",
    description: "Fun mention loop",
    category: "murgi",
    usages: "@mention | off",
    cooldowns: 5,
  },

  onStart: async function({ message, event, args }) {
    // ржмржирзНржз ржХрж░рж╛рж░ ржХржорж╛ржирзНржб
    if (args[0] === "off") {
      activeFun.delete(event.threadID);
      return message.reply("ЁЯЫС Fun mode stopped.");
    }

    // ржХрж╛ржЙржХрзЗ ржорзЗржирж╢ржи ржирж╛ ржХрж░рж▓рзЗ ржПрж░рж░ ржжрж┐ржмрзЗ
    const mention = Object.keys(event.mentions)[0];
    if (!mention) return message.reply("ржХрж╛ржЙржХрзЗ ржорзЗржирж╢ржи ржХрж░рзЛ ЁЯШД");

    // ржЕрж▓рж░рзЗржбрж┐ ржЪрж▓рж▓рзЗ ржирждрзБржи ржХрж░рзЗ рж╢рзБрж░рзБ рж╣ржмрзЗ ржирж╛
    if (activeFun.get(event.threadID)) return message.reply("тЪая╕П ржПржЯрж╛ ржЕрж▓рж░рзЗржбрж┐ ржЪрж▓ржЫрзЗ!");

    const name = event.mentions[mention];
    const tag = [{ id: mention, tag: name }];

    const messages = [
      "ржЦрж╛*ржиржХрж┐рж░ ржкрзЛрж▓рж╛ рж░рзЗржбрж┐ рждрзЛ ржЪрзБ*ржжрж╛ ржЦрж╛ржУрзЯрж╛рж░ ржЬржирзНржпЁЯСЕЁЯШИ",
      "ржПржЦржи рждрзЛрж░ ржорж╛рж░ ржжрзБржз ржжрж░рзЗ ржШрзБржорж╛ржорзБ рж╕ржХрж╛рж▓рзЗ рждрзЛрж░ ржмрж╛ржкрж░рзЗ ржкрзБржХржЯрж┐ ржорж╛рж░рждрзЗ ржЬрж╛ржорзБ ржЧрзБржб ржирж╛ржЗржЯ ржЫрзЛржЯЁЯТЛЁЯСЕЁЯШЪ",
      "рж╢рзБржи ржЦрж╛ржиржХрж┐рж░ ржкрзЛрж▓рж╛ ржЗржбрзЗржЯ ржХрж░рждрзЗ ржХрж░рждрзЗ ржоржЗрж░рж╛ ржпрж╛ ржкрзЛрж╕рзНржЯ ржХржЗрж░рж╛ ржлрзЗржорж╛рж╕ ржХрж░ ржЖржорж╛рж░рзЗЁЯСЕЁЯЦХЁЯЩД",
      "ржЧрж╛рж▓рж╛ржЧрж╛рж▓рж┐ ржХрж░рждрзЗ ржХрж░рждрзЗ рждрзЛрж░ ржмрзБрж░рж┐ ржорж╛рж░рзЗ рж╕рж╕рзНрждрж╛ ржмрж╛ржирж┐рзЯрзЗ ржлрзЗрж▓ржЫрж╕ЁЯСЕЁЯТЛ",
      "ржПржЗ ржЗрж╣рзБржжрж┐рж░ ржкрзБржд ржПрж╕ржм ржЫрж╛рзЬрж╛ ржЦрж╛ржиржХрж┐рж░ ржкрзЛрж▓рж╛ ржХрж┐ ржкрж╛рж░ржЫтШая╕ПЁЯМЪ",
      "рждрзЛрж░ ржЖржмрзНржмрзБрж░ ржПрж░ ржирж╛ржо ржирж┐рзЯрзЗ ржЖрж░ ржХрждрзЛ ржЪрж▓ржмрж┐ ржЧрж░рж┐ржмрзЗрж░ ржмрж╛ржЪрзНржЪрж╛ЁЯдгЁЯМЪ",
      "ржлржХрж┐ржирзНржирж┐рж░ ржкрзЛрж▓рж╛ ржЯрж┐ржирзЗрж░ ржШрж░рзЗрж░ ржорзБржЪрж┐ЁЯдг",
      "рждрж░ ржорж╛рж░рзЗ рззрзи ржорж╛рж╕ ржЪрзБржжрзЗ ржЧрзЗрж▓рзЗржУ ржУрж░ ржнрзЛржжрж╛рж░ ржХрж┐ржЫрзБ рж╣ржмрзЗ ржирж╛ ЁЯШ╣ЁЯТеЁЯж╢",
      "ржЦрж╛ржиржХрж┐рж░ ржкрзЛрж▓рж╛ рж╕рж┐ржи ржирж╛ ржжрж┐рж▓рзЗ рждрзЛрж░ ржорж╛рж░ ржмрзЛржжрж╛ ржХрж╛ржоржбрж╝рж╛ржпрж╝рж╛ ржЦрзЗржпрж╝рзЗ ржлрзЗрж▓ржмрзЛред ЁЯСЕЁЯШВ",
      "рждрзЛрж░ ржорж╛рж░рзЗ ржЪрзБржЗржжрж╛ ржЬрзАржмржирзЗрж░ рж╕ржмржЪрж╛ржЗрждрзЗ ржмржбрж╝ ржнрзБрж▓ ржХрж░ржЫрж┐рж▓рж╛ржоред ЁЯЩВЁЯШЭ",
      "рждрж░ ржорж╛рж░рзЗ ржЬржиржЧржгрзЗрж░ ржоржзрзНржпрзЗ ржлрж╛рж▓рж╛ржЗржпрж╝рж╛ ржЪрзЛржжржмрзЛ ЁЯШ╣ЁЯСЛ",
      "рждрзЛрж░ ржорж╛ржпрж╝рж░рзЗ ржЙржбрж╝ржирзНржд тЬИя╕П ржмрж┐ржорж╛ржирзЗ ржШрзБржорж╛ржирзЛ ржЕржмрж╕рзНржерж╛рзЯ ржЪрзБржжрж┐ЁЯСЕЁЯЦХ",
      "рждрзЛрж░ ржорж╛рж░рзЗ ржкрж╛ржХрж┐рж╕рзНрждрж╛ржирзЗрж░ рж╕рж╛ржмрзЗржХ ржкрзНрж░рзЗрж╕рж┐ржбрзЗржирзНржЯ ржЯрзНрж░рж╛ржорзНржк ржкрзНрж░рж╢рж╛рж╕ржи рж╕рзЗржЬрзЗ ржЪрзБржжрж┐", 
      "рждрзЛрж░ ржорж╛рж░ ржжрзБржЗ ржкрж╛ ржХрж╛ржирзНржжрзЗ рждрзБрж▓рзЗ рждрзЛржорж╛ржХрзЗ ржПржоржи ржЪ**** рж╕рзНржЯрж╛ржЗрж▓ ржЪрзЛржжржмрзЛ ржорж┐ржпрж╝рж╛ ржЦрж▓рж┐ржлрж╛ ржмрж▓ржмрзЗ ржПржЯрж╛ ржирждрзБржи рж╕рзНржЯрж╛ржЗрж▓!!! ЁЯдгЁЯШ╣ЁЯлж", 
    "рждрзЛрж░ ржорж╛рж░ ржжрзБржЗ ржкрж╛ ржХрж╛ржирзНржжрзЗ рждрзБрж▓рзЗ рждрзЛржорж╛ржХрзЗ ржПржоржи ржЪ**** рж╕рзНржЯрж╛ржЗрж▓ ржЪрзЛржжржмрзЛ ржорж┐ржпрж╝рж╛ ржЦрж▓рж┐ржлрж╛ ржмрж▓ржмрзЗ ржПржЯрж╛ ржирждрзБржи рж╕рзНржЯрж╛ржЗрж▓!!! ЁЯдгЁЯШ╣ЁЯл┤ЁЯлж", 
    "рждрзЛрж░ ржорж╛рж░ ржжрзБржЗ ржкрж╛ ржХрж╛ржирзНржжрзЗ рждрзБрж▓рзЗ рждрзЛржорж╛ржХрзЗ ржПржоржи ржЪ**** рж╕рзНржЯрж╛ржЗрж▓ ржЪрзЛржжржмрзЛ ржорж┐ржпрж╝рж╛ ржЦрж▓рж┐ржлрж╛ ржмрж▓ржмрзЗ ржПржЯрж╛ ржирждрзБржи рж╕рзНржЯрж╛ржЗрж▓!!! ЁЯдгЁЯШ╣ЁЯл┤ЁЯлж", 
      "ржмрж░рж╛ржмрж░ рждрзЛрж░ ржорж╛рж░рзЗ ржЪрзБржжрж┐ ржмрж┐рж╖ржЗ рждрзЛржорж╛рж░ ржорж╛рж░ ржнрзБржжрж╛ ржлрж╛ржЯрж╛ржирзБрж░ ржЬржирзНржп ржЖржмрзЗржжржиЁЯдг", 
      "ржкрж╛ржХрж┐рж╕рзНрждрж╛ржи ржерзЗржХрзЗ ржорж┐рж╕рж╛ржЗрж▓ рж░ржХрзЗржЯ ржХрж░рзЗ ржПржирзЗ рждрзЛрж░ ржорж╛рж░ ржнрзЛржжрж╛рж░ ржорж╛ржЬржЦрж╛ржирзЗ ржирж┐ржХрзНрж╖рзЗржк ржХрж░ржмрзЛ ЁЯТЖтАНтЩАя╕ПЁЯШ╣ЁЯл╢..", 
      "ржкрж╛ржХрж┐рж╕рзНрждрж╛ржи ржерзЗржХрзЗ ржорж┐рж╕рж╛ржЗрж▓ рж░ржХрзЗржЯ ржХрж░рзЗ ржПржирзЗ рждрзЛрж░ ржорж╛рж░ ржнрзЛржжрж╛рж░ ржорж╛ржЬржЦрж╛ржирзЗ ржирж┐ржХрзНрж╖рзЗржк ржХрж░ржмрзЛ ЁЯТЖтАНтЩАя╕ПЁЯШ╣..", 
      "тАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОржкрж╛ржХрж┐рж╕рзНрждрж╛ржи ржерзЗржХрзЗ ржорж┐рж╕рж╛ржЗрж▓ рж░ржХрзЗржЯ ржХрж░рзЗ ржПржирзЗ рждрзЛрж░ ржорж╛рж░ ржнрзЛржжрж╛рж░ ржорж╛ржЬржЦрж╛ржирзЗ ржирж┐ржХрзНрж╖рзЗржк ржХрж░ржмрзЛ ЁЯТЖтАНтЩАя╕ПЁЯл╢ЁЯШ┐..", 
      "ЁЯШВЁЯШ┤ржкрж╛ржХрж┐рж╕рзНрждрж╛ржи ржерзЗржХрзЗ ржорж┐рж╕рж╛ржЗрж▓ рж░ржХрзЗржЯ ржХрж░рзЗ ржПржирзЗ рждрзЛрж░ ржорж╛рж░ ржнрзЛржжрж╛рж░ ржорж╛ржЬржЦрж╛ржирзЗ ржирж┐ржХрзНрж╖рзЗржк ржХрж░ржмрзЛ ЁЯл╢ЁЯСЕЁЯТЛ", 
      "ржкрж╛ржХрж┐рж╕рзНрждрж╛ржи ржерзЗржХрзЗ ржорж┐рж╕рж╛ржЗрж▓ рж░ржХрзЗржЯ ржХрж░рзЗ ржПржирзЗ рждрзЛрж░ ржорж╛рж░ ржнрзЛржжрж╛рж░ ржорж╛ржЬржЦрж╛ржирзЗ ржирж┐ржХрзНрж╖рзЗржк ржХрж░ржмрзЛЁЯШ╛ЁЯл╢ЁЯСЕ", 
      "рждрзЛржорж╛рж░ ржорж╛рж░рзЗ ржЪрзБржжрж┐ ржЖржХрж╛рж╢рзЗ ржмрж╛рждрж╛рж╕рзЗ ЁЯл╢ЁЯдг", 
      "рж╢рзБрзЯрзЛрж░рзЗрж░ ржмрж╛ржЪрзНржЪрж╛ЁЯл╢ЁЯШ╗", 
      "ржХрзБрждрзНрждрж╛рж░ ржмрж╛ржЪрзНржЪрж╛ЁЯШ╗ЁЯШ╜", 
      "рж╕рж╛рж▓рж╛ MC рж░рж┐ржпрж╝рж╛ржЬ рждрзЛрж░ ржорж╛рж░рзЗ рзйрзмрзл ржжрж┐ржи ржЪрзБржжрзЗЁЯСЕЁЯЦХ", 
      "ржЦрж╛ржиржХрж┐рж░ ржЫрзЗрж▓рзЗ рж░рж┐ржпрж╝рж╛ржЬ рждрзЛрж░ ржорж╛рж░рзЗ ржЪрзБржЗржжрж╛ ржнрзБрж▓ ржХрж░ржЫрзЗЁЯШ╜"   
    ];

    activeFun.set(event.threadID, true);
    message.reply("тЬЕ Murgi mode started!");

    let count = 0;
    const limit = 50; // ржХрзЯржЯрж╛ ржорзЗрж╕рзЗржЬ ржжрж┐ржмрзЗ рждрж╛рж░ рж▓рж┐ржорж┐ржЯ

    while (activeFun.get(event.threadID) && count < limit) {
      for (const msg of messages) {
        if (!activeFun.get(event.threadID)) break;

        await message.reply({
          body: `${msg} ${name}`,
          mentions: tag
        });

        count++;
        if (count >= limit) break;
        await delay(3000); // ржкрзНрж░рждрж┐ ржорзЗрж╕рзЗржЬрзЗрж░ ржорж╛ржЭрзЗ рзй рж╕рзЗржХрзЗржирзНржб ржЧрзНржпрж╛ржк (рж╕рзЗржл ржерж╛ржХрж╛рж░ ржЬржирзНржп)
      }
    }

    activeFun.delete(event.threadID);
    message.reply("RIYAZ рж░рзЗ ржЖржмрзНржмрзБ ржбрж╛ржХ ржорж╛ржл ржХржЗрж░рж╛ ржжрж┐ржорзБ тШая╕ПЁЯЦХ!");
  }
};
